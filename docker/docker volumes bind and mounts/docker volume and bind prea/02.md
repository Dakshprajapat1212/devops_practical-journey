Got it 👍 You want complete notes covering everything you just practiced with Docker — volume, mount, images, containers, and especially the --mount concept with all commands and steps.
I’ll prepare a detailed, structured document that looks like study notes + reference, so you can revise anytime.

⸻

📘 Docker Volumes, Mounts & Usage — Complete Notes

1. Why Volumes in Docker?
	•	Containers are ephemeral → if a container is removed, its filesystem is lost.
	•	To persist data, we use volumes.
	•	Volumes are managed by Docker, stored under /var/lib/docker/volumes/.

⸻

2. Types of Storage in Docker
	1.	Bind Mounts
	•	Mounts a host machine directory into a container.
	•	Example:

docker run -v /host/path:/container/path nginx


	2.	Volumes (Preferred)
	•	Fully managed by Docker.
	•	Stored in /var/lib/docker/volumes/.
	•	Example:

docker volume create mydata
docker run -d --mount type=volume,source=mydata,target=/app nginx


	3.	Tmpfs Mounts
	•	Stored in memory only, lost when container stops.
	•	Example:

docker run --mount type=tmpfs,target=/app tmpfs:rw



⸻

3. Volume Commands

Command	Description
docker volume ls	List all volumes
docker volume create <name>	Create a volume
docker volume inspect <name>	Inspect details (mountpoint, driver, etc.)
docker volume rm <name>	Remove a volume
docker volume prune	Remove unused volumes

Example:

docker volume ls
docker volume create daksh
docker volume inspect daksh

Output of inspect (important part 👇):

"Mountpoint": "/var/lib/docker/volumes/daksh/_data"

👉 This is where Docker stores the volume data.

⸻

4. Mounting Volumes in Containers

Old Way (-v)

docker run -d -v daksh:/app nginx

Here:
	•	daksh → volume name
	•	/app → container path

New Way (--mount)

More powerful & recommended:

docker run -d --mount type=volume,source=daksh,target=/app nginx

✅ Advantages of --mount:
	•	More explicit
	•	Supports extra options
	•	Works with volume, bind, and tmpfs

⸻

5. Practical Examples

Example 1: Run a container with volume

docker volume create daksh
docker run -d --mount type=volume,source=daksh,target=/app demo

	•	demo is your custom image that runs python3 app.py
	•	Volume daksh will store /app data

⸻

Example 2: Use Nginx with volume

docker run -d --mount type=volume,source=daksh,target=/usr/share/nginx/html nginx:latest

	•	nginx serves files from /usr/share/nginx/html
	•	By mounting daksh there, you can persist website files.

Check running container:

docker ps


⸻

Example 3: Inspect container image

docker inspect nginx
docker inspect demo

Look at:
	•	Cmd → What runs inside (nginx -g 'daemon off;', python3 app.py)
	•	Env → Environment variables
	•	Volumes → Mounted volumes

⸻

6. Common Mistakes & Fixes

❌ Wrong:

docker run -d --mount source=daksh, target=/app demo

(Notice the extra comma)

✅ Correct:

docker run -d --mount type=volume,source=daksh,target=/app demo


⸻

7. Full Lifecycle Example
	1.	Create a volume

docker volume create mydata


	2.	Run a container with mount

docker run -d --name web --mount type=volume,source=mydata,target=/usr/share/nginx/html nginx


	3.	Copy a file into container

docker exec -it web bash
echo "Hello from Docker Volume" > /usr/share/nginx/html/index.html
exit


	4.	Access via container IP or exposed port → you’ll see the file.
	5.	Stop & remove container

docker rm -f web


	6.	Run again with same volume → data persists!

docker run -d --name web2 --mount type=volume,source=mydata,target=/usr/share/nginx/html nginx

✅ File is still there.

⸻

8. Key Differences

-v	--mount
Old syntax	New recommended syntax
Short, less clear	Explicit key=value format
-v volume:/path	--mount type=volume,source=volume,target=/path
Still works	Preferred in production


⸻

9. Useful Debugging
	•	Check logs:

docker logs <container_id>


	•	Inspect container:

docker inspect <container_id>


	•	Enter container shell:

docker exec -it <container_id> bash



⸻

10. Summary
	•	Volumes → Best for persistence in Docker.
	•	--mount → Explicit, powerful, modern way to attach storage.
	•	Inspect → Helps you understand image & container configuration.
	•	Lifecycle demo → Data inside volume survives container restarts/removal.

⸻

👉 Hannu, this document is like a ready revision sheet. You can keep it open while practicing.
Do you want me to also make a one-page quick-reference cheatsheet (just commands + examples, no theory) so you can recall instantly during practice?
